# Adding new expenses to the expenses list

By using the `Two-Way Binding`, `Child-to-Father component communication` and `Lifting the state up` to transport the expense created in the `FormExpense.js` to the `App.js` we can now add the expense created into the `ExpenseList.js`.

## Remembering how a new expense can reach the `App.js`

We created a function called `addExpenseHandler` in `App.js` which receives a expense as a parameter, right? This parameter was sent, initially, in the `FormExpense.js` to `NewExpense.js` through the `Two-Way binding` function created in `NewExpense.js` (`saveExpenseDataHandler`). This function then was sent to `FormExpense.js` as a attribute in the `props` object (`onSaveExpenseData`).

In `FormExpense.js` we used the prop function when the form was submitted (`submitHandler`), which was responsible to add the expense to database and then return the new expense created to the `NewExpense.js` component, which by then the expense was transmitted to `App.js` (remember the lifting the state up).

```sh
`NewExpense.js`
const NewExpense = (props) => {
  /*
   *  We created a function which is responsible to get the expense created in the `FormExpense` component below and then send to 
   *  `App.js`
   */
  const saveExpenseDataHandler = enteredExpenseData => {
    const expense = {
      ...enteredExpenseData,
      id: Math.random().toString()
    };
    console.log('In NewExpense.js:');
    console.log(expense);
    props.onAddExpense(expense);
  }
  return (
    <div className="new-expense">
      // We pass the function created above as a attribute to the component
      <FormExpense onSaveExpenseData={saveExpenseDataHandler} />
    </div>
  );
}

`FormExpense.js`
const FormExpense = (props) => {
  // Created a function which is responsible to send the new expense to the database
  const submitHandler = event => {
    event.preventDefault();
    const newExpense = {
      description : enteredDescription,
      value       : enteredValue,
      date        : new Date(enteredDate + 'T00:00:00') // in case if you live in Brazil
    };
    // This is the function which was created in the `NewExpense.js`, to pass the data up (child-to-father)
    props.onSaveExpenseData(newExpense);
    setEnteredDescription('');
    setEnteredValue('');
    setEnteredDate('');
  };

  // This is where the function created above will be executed (when the form is submitted)
  return (
    <form onSubmit={submitHandler}>
    </form>
  );
}
```

## Adding a new expense to expense list

We built a way to pass the data from `FormExpense.js` to `App.js`, what we do now?

So, `App.js` is where all the dummy expenses are. All we have to do is simply add the new expense create to the array of dummy expenses. Ah, we will created a new state as well:

```sh
import { useState } from "react";
import ExpenseList from "./components/Expenses/ExpenseList";
import NewExpense from "./components/NewExpense/NewExpense";

const DUMMY_EXPENSES = [
  {
    key         : 1,
    description : 'Car Insurance',
    date        : new Date(2020, 2, 19),
    value       : 264.97
  },
  {
    key         : 2,
    description : 'Guitar Reformation',
    date        : new Date(2020, 2, 20),
    value       : 165.99
  },
  {
    key         : 3,
    description : 'Supermarket',
    date        : new Date(2020, 2, 21),
    value       : 300.00
  }
];

function App() {
  
  const [expenses, setExpenses] = useState(DUMMY_EXPENSES);

  const addExpenseHandler = expense => {
    setExpenses(prevExpenses => {
      return [expense, ...prevExpenses]
    });
  }

  return (
    <div>
      <NewExpense onAddExpense={addExpenseHandler} />
      <ExpenseList expenses={expenses} />
    </div>
  );
}

export default App;
```

By the way, we changed the file a little bit. You can recall the expenses were created inside the `App` function, right? So, we moved them outside and named the const to `DUMMY_EXPENSES`.

We created the attribute and set function using the `useState()` passing through the `DUMMY_EXPENSES` as a parameter to set a default value to `expenses`.

In the `addExpenseHandler` function, which was used to log our new expense previously, we call the `setExpenses` function to add the new expense. It's important to note that we depend the previous expense, so we need to use a function to get the previous state and add the new expense to the `expenses` attribute.

With that we can add new expenses to the expense list now!

# Adding Dynamic Styles

Everything's working as planned. Now, we are going to add a chart to see how much we spent in each month. And since each month has different values, we'll need to use dynamic styles to color our bar for each month.

## First Step

Before anything else, we are going to update our `Expenses.js` file to use a new component, which will be called `ExpensesChart.js`. This new component will need the filtered expenses as a property.

```sh
// importing all things...
import 'ExpensesChart' from './ExpensesChart';

const ExpensesChart = props => {
  // logic already built in the component...

  return (
    <Card className=" expenses">
      <ExpensesFilter
        selected={filteredYear}
        onChangeFilter={filterChangeHandler}
      />
      <ExpensesChart expenses={expensesFiltered} /> // <== here´s the component!
      <ExpensesList items={expensesFiltered} />
    </Card>
  );
}

// exporting...
```

Everything is set! Now to the new components...

## Creating the ExpensesChart component

Now we are going to create the component which will be responsible to hold the chart and chart bars for each month of the filtered expenses. Like I said before, we'll need to create the `ExpensesChart.js` into the `Expenses` folder.

```sh
import Chart from "../Chart/Chart";

const ExpensesChart = props => {

  // These dataPoints will be used to render the bars of each month...
  const chartDataPoints = [
    { label: 'Jan' , value: 0 },
    { label: 'Fev' , value: 0 },
    { label: 'Mar' , value: 0 },
    { label: 'Apr' , value: 0 },
    { label: 'May' , value: 0 },
    { label: 'Jun' , value: 0 },
    { label: 'Jul' , value: 0 },
    { label: 'Aug' , value: 0 },
    { label: 'Sep' , value: 0 },
    { label: 'Oct' , value: 0 },
    { label: 'Nov' , value: 0 },
    { label: 'Dec' , value: 0 }
  ]

  /* for each expense that was sent into the props, we are going to catch the month (numeral value) of the expense and add it to the value of the dataPoint. */
  for(const expense of props.expenses) {
    const expenseMonth = expense.date.getMonth(); //starting at 0 (January)
    chartDataPoints[expenseMonth].value += expense.value;
  }

  /* creating the char component and passing the dataPoint updated with the value of what was spent on each month */
  return (
    <Chart dataPoints={chartDataPoints} />
  );

}

export default ExpensesChart;
```

## Creating the Chart component

Now, we need to create the `Chart` component which will hold the `ChartBar` as well.

```sh
import ChartBar from "./ChartBar";
import "./Chart.css";

const Chart = props => {
  /* By receiving the dataPoint as a prop, we are going to create a new array of each month total spent value */
  const dataPointValues = props.dataPoints.map(dataPoint => dataPoint.value),
        totalMaximum = Math.max(...dataPointValues); // using the max function to find with spent value is highest one.
  return (
    <div className="chart">
      /*
        for each month that was calculated in the parent component, create a ChartBar component passing:
          - month´s name (label) as a key
          - total spent as a value
          - highest value spent on 12 months as totalMaximum (doesn´t make sense, but since it´s a demo, we don´t need a limitation) 
          - month´s name as a label
      {props.dataPoints.map((dataPoint) => (
        <ChartBar
          key={dataPoint.label}
          value={dataPoint.value}
          maxValue={totalMaximum}
          label={dataPoint.label}
        />
      ))}
    </div>
  );
};

export default Chart;
```

Before creating the `ChartBar` component, here´s the styles from `Chart.css`:

```sh
.chart {
  padding: 1rem;
  border-radius: 12px;
  background-color: #f8dfff;
  text-align: center;
  display: flex;
  justify-content: space-around;
  height: 10rem;
}
```

Now, the `ChartBar` component...

```sh
import './ChartBar.css';

const ChartBar = props => {
  // we are going to create a default value to the bar filler
  let barFillHeight = '0%';

  // if the max value spent on 12 months is higher than 0, calculate the new height
  if(props.maxValue > 0) {
    barFillHeight = Math.round((props.value / props.maxValue) * 100) + '%';
  }

  // creating the component and setting the dynamic style (note that we are creating an object)
  return (
    <div className="chart-bar">
      <div className="chart-bar__inner">
        <div className="chart-bar__fill" style={{height: barFillHeight}}></div>
      </div>
      <div className="chart-bar__label">{props.label}</div>
    </div>
  );
}

export default ChartBar;
```

Styles (`ChartBar.css`):

```sh
.chart-bar {
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.chart-bar__inner {
  height: 100%;
  width: 100%;
  border: 1px solid #313131;
  border-radius: 12px;
  background-color: #c3b4f3;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
}

.chart-bar__fill {
  background-color: #4826b9;
  width: 100%;
  transition: all 0.3s ease-out;
}

.chart-bar__label {
  font-weight: bold;
  font-size: 0.5rem;
  text-align: center;
}
```

By the end of this, we're going to have an amazing way to demonstrate how our expenses are going. Check it out!
